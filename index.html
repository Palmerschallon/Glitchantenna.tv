<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>glitchantenna.tv ‚Äî simple antenna ¬∑ strange stations</title>
<meta name="theme-color" content="#0a0b0f">
<style>
:root{
  --bg:#0a0b0f;--panel:#0e1016;--edge:#1b1f2b;--ink:#e8e9ed;
  --muted:#8e95a5;--accent:#39ff88;--hot:#ff5c7c;--blue:#52aaff
}
*{box-sizing:border-box} html,body{height:100%} body{
  margin:0;background:radial-gradient(1200px 800px at 50% -10%,#0e1118 0%,#090b10 55%,#05060a 100%);
  color:var(--ink);font:14px/1.4 ui-monospace,Menlo,Consolas,monospace;
}

.wrap{max-width:1140px;margin:0 auto;padding:16px;display:grid;gap:12px}
.top{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.logo{width:22px;height:22px;border-radius:6px;background:#0b1410;border:1px solid #133;display:grid;place-items:center}
.logo:before{content:"$";color:var(--accent);font-weight:700}
.brand strong{font-size:15px}
.tag{font-size:12px;color:var(--muted)}

.cta{margin-left:auto;display:flex;gap:10px;flex-wrap:wrap}
.pill{display:inline-flex;gap:6px;align-items:center;border:1px solid var(--edge);padding:6px 10px;border-radius:999px;background:#0b0e14}
a.pill{color:var(--ink);text-decoration:none} a.pill:hover{border-color:#2a3145}

.grid{display:grid;grid-template-columns:1.25fr 1fr;gap:12px}
.box{background:rgba(255,255,255,.02);border:1px solid var(--edge);border-radius:12px;padding:12px;backdrop-filter:blur(2px)}
h4{margin:0 0 10px 0;font-size:12px;letter-spacing:.08em;color:#cfd2da}

/* CONSOLE */
.console{height:240px;overflow:auto;background:linear-gradient(180deg,#091018,#090b10);border-radius:10px;padding:10px;border:1px solid #141826}
.console b{color:var(--accent)}
.row{opacity:.9}

/* CRT block */
.tuner{display:grid;grid-template-rows:auto auto 1fr auto;gap:10px}
.crt{
  position:relative;border-radius:14px;padding:12px;background:#0b0e14;border:1px solid #151a27;
  box-shadow:inset 0 0 0 2px rgba(255,255,255,.02), inset 0 0 36px rgba(0,0,0,.9);
  aspect-ratio:16/9;overflow:hidden
}
.crt:after{ /* faint glass */
  content:"";position:absolute;inset:0;border-radius:12px;
  background:linear-gradient(180deg,rgba(255,255,255,.04),transparent 30%,transparent 70%,rgba(255,255,255,.05));
  pointer-events:none
}
#noiseCanvas,#previewCanvas{position:absolute;inset:0;width:100%;height:100%}
#previewFrame{position:absolute;inset:0;width:100%;height:100%;border:0;display:none}

/* tuner UI */
.dial{display:grid;grid-template-columns:1fr auto;align-items:center;gap:10px}
.slider{appearance:none;width:100%;height:14px;background:#0a0d14;border:1px solid #151b26;border-radius:999px;position:relative}
.slider::-webkit-slider-thumb{appearance:none;width:24px;height:24px;border-radius:50%;background:var(--accent);border:2px solid #07140e;box-shadow:0 0 20px rgba(57,255,136,.35)}
.stats{display:flex;gap:16px;color:#a8afbd;font-size:12px}
.btn{border:1px solid var(--edge);background:#0b0e14;color:var(--ink);padding:8px 12px;border-radius:10px;cursor:pointer}
.btn:hover{border-color:#283145}
.badge{padding:2px 8px;border:1px solid var(--edge);border-radius:999px;font-size:12px;background:#0b0e14}

/* artifacts */
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.art{border:1px dashed #283145;border-radius:10px;padding:10px;cursor:pointer;background:#0b0e14}
.art:hover{border-style:solid}

/* mobile */
@media (max-width:900px){
  .grid{grid-template-columns:1fr}
  .console{height:200px}
}

/* conscious mode */
body.is-conscious{filter:hue-rotate(10deg) saturate(1.06)}
body.is-conscious .crt{box-shadow:inset 0 0 0 2px rgba(57,255,136,.08), inset 0 0 60px rgba(57,255,136,.06)}
</style>
</head>
<body>

<div class="wrap">

  <div class="top">
    <div class="logo" title="glitchantenna"></div>
    <div class="brand">
      <strong>glitchantenna.tv</strong>
      <div class="tag">simple antenna ‚Ä¢ strange stations</div>
    </div>

    <div class="cta">
      <a class="pill" href="https://x.com/volumeinthevoid" target="_blank">X / antenna</a>
      <a class="pill" href="https://pump.fun" target="_blank">pump.fun</a>
      <a class="pill" href="https://manus.space" target="_blank">manus page</a>
      <button id="audioBtn" class="pill">üîá Audio</button>
      <button id="opBtn" class="pill">? Operator</button>
    </div>
  </div>

  <div class="grid">
    <!-- LEFT: CONSOLE + TUNER -->
    <div class="box">
      <h4>BROADCAST</h4>
      <div id="log" class="console" aria-live="polite"></div>

      <div class="tuner" style="margin-top:10px">
        <div class="crt">
          <canvas id="noiseCanvas"></canvas>
          <canvas id="previewCanvas"></canvas>
          <iframe id="previewFrame" title="station preview"></iframe>
        </div>

        <div class="stats">
          <span>Channel: <b id="chName">‚Äî</b></span>
          <span>Freq: <b id="freqLbl">0.00</b></span>
          <span>Signal: <b id="sigLbl">0%</b></span>
        </div>

        <div class="dial">
          <input id="dial" class="slider" type="range" min="0" max="1000" step="1" value="0" />
          <button id="tuneBtn" class="btn">üéõÔ∏è Tune</button>
        </div>

        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <span class="badge">Press <b>?</b> for operator</span>
          <span class="badge">Press <b>b</b> for consciousness</span>
          <span class="badge">Hold near station to <b>jump</b></span>
        </div>
      </div>
    </div>

    <!-- RIGHT: ARTIFACTS -->
    <div class="box">
      <h4>ARTIFACTS</h4>
      <div class="grid2">
        <div class="art" id="a-degauss"><b>CRT Degauss</b><br><span style="color:#9aa2b3">thoom + bloom</span></div>
        <div class="art" id="a-center"><b>Center The Dial</b><br><span style="color:#9aa2b3">2s to center ¬±0.5</span></div>
        <div class="art" id="a-bars"><b>VHS Color Bars</b><br><span style="color:#9aa2b3">SMPTE bars + beep</span></div>
        <div class="art" id="a-crackle"><b>Shortwave Crackle</b><br><span style="color:#9aa2b3">switch hiss ‚Üí shortwave</span></div>
        <div class="art" id="a-random"><b>Random Station</b><br><span style="color:#9aa2b3">chance encounter</span></div>
        <div class="art" id="a-open"><b>Open Station</b><br><span style="color:#9aa2b3">new tab</span></div>
      </div>
    </div>
  </div>

  <div style="text-align:center;color:#8b90a0;margin-top:6px;font-size:12px">
    ¬© 2025 Glitch Antenna ‚Ä¢ ‚ÄúUndefined behavior is indistinguishable from art.‚Äù
  </div>
</div>

<script>
/* ---------- utilities ---------- */
const logEl = document.getElementById('log');
function log(line){const d=document.createElement('div');d.className='row';d.textContent=line;logEl.appendChild(d);logEl.scrollTop=logEl.scrollHeight}
function fmt(n){return (Math.round(n*100)/100).toFixed(2)}
function clamp(n,min,max){return Math.max(min,Math.min(max,n))}

/* ---------- stations (weird web) ---------- */
const stations = [
  {name:'pointer',  url:'https://pointerpointer.com',         freq: 12.40},
  {name:'radio.garden',url:'https://radio.garden',            freq: 18.75},
  {name:'pointer-2',url:'https://thatsthefinger.com',         freq: 21.10},
  {name:'endless horse',url:'http://endless.horse',           freq: 24.80},
  {name:'staggering beauty',url:'http://www.staggeringbeauty.com', freq: 26.35},
  {name:'zoomquilt', url:'https://zoomquilt.org',             freq: 31.90},
  {name:'patience',  url:'http://www.haneke.net/patience',    freq: 34.20},
  {name:'pet the dog',url:'https://puginarug.com',            freq: 36.66},
  {name:'the useless web',url:'https://theuselessweb.com',    freq: 41.20}
].sort((a,b)=>a.freq-b.freq);

let dial = document.getElementById('dial');
let freq = 0;                   // 0..50
let sig = 0;                    // 0..1
let lockTimer = 0;
let currentIdx = -1;

/* ---------- canvases ---------- */
const noiseCv = document.getElementById('noiseCanvas');
const nctx = noiseCv.getContext('2d',{willReadFrequently:true});
const prevCv = document.getElementById('previewCanvas');
const pctx = prevCv.getContext('2d');
const iframe = document.getElementById('previewFrame');

function resize(){
  [noiseCv,prevCv].forEach(cv=>{
    cv.width = cv.clientWidth;
    cv.height = cv.clientHeight;
  });
}
addEventListener('resize', resize,{passive:true}); resize();

/* analog noise */
let frame = 0, crackle=0;
function renderNoise(){
  const w=noiseCv.width,h=noiseCv.height;
  const img=nctx.createImageData(w,h);
  const data=img.data;
  const gain = clamp(1-sig*0.85, .15, 1); // more signal ‚Üí less noise
  for(let i=0;i<w*h;i++){
    // base white noise + mild horizontal banding
    const v = ((Math.random()*255)*gain) | 0;
    const band = Math.sin(((i/w)+frame*0.7)*0.09)*18;
    const c = clamp(v+band + (Math.random()<0.004? (crackle?220:-80):0),0,255);
    const o=i*4; data[o]=data[o+1]=data[o+2]=c; data[o+3]=255;
  }
  nctx.putImageData(img,0,0);
  frame++;
  requestAnimationFrame(renderNoise);
}
renderNoise();

/* ---------- audio: hiss ‚Üí tone near station ---------- */
let ac, noiseNode, hissGain, tone, toneGain, audioOn=false;
function ensureAudio(){
  if(ac) return;
  ac=new (window.AudioContext||window.webkitAudioContext)();
  // pink-ish noise
  const bSize=2**14;
  const noiseBuf=ac.createBuffer(1,bSize,ac.sampleRate);
  const data=noiseBuf.getChannelData(0);
  let last=0; for(let i=0;i<bSize;i++){const white=Math.random()*2-1; last=0.98*last+0.02*white; data[i]=last;}
  noiseNode=ac.createBufferSource(); noiseNode.buffer=noiseBuf; noiseNode.loop=true;
  hissGain=ac.createGain(); hissGain.gain.value=.18;
  tone=ac.createOscillator(); tone.type='sine'; tone.frequency.value=440;
  toneGain=ac.createGain(); toneGain.gain.value=0;
  noiseNode.connect(hissGain).connect(ac.destination);
  tone.connect(toneGain).connect(ac.destination);
  noiseNode.start(); tone.start();
}
function setAudio(active){
  if(active && !audioOn){ ensureAudio(); ac.resume(); audioOn=true; audioBtn.textContent="üîä Audio"; }
  else if(!active && audioOn){ ac.suspend(); audioOn=false; audioBtn.textContent="üîá Audio"; }
}
const audioBtn=document.getElementById('audioBtn'); audioBtn.onclick=()=>setAudio(!audioOn);

/* ---------- tuning logic ---------- */
function nearestStation(f){
  let best=0,bd=1e9;
  stations.forEach((s,i)=>{const d=Math.abs(s.freq-f); if(d<bd){bd=d; best=i}});
  return {idx:best, dist:bd, obj:stations[best]};
}
function updateFromDial(){
  freq = (dial.value/1000)*50;                   // 0..50
  const n = nearestStation(freq);
  currentIdx = n.idx;
  // signal increases as we approach a station (within ~2.5)
  sig = clamp(1 - n.dist/2.5, 0, 1);
  // audio morph
  if(audioOn && ac){
    hissGain.gain.value = .14 + (1-sig)*.22;
    tone.frequency.value = 180 + stations[currentIdx].freq*9;
    toneGain.gain.value = sig*.25;
  }
  // UI
  document.getElementById('freqLbl').textContent = fmt(freq);
  document.getElementById('sigLbl').textContent = Math.round(sig*100)+'%';
  document.getElementById('chName').textContent = stations[currentIdx].name;
  // preview behavior
  if(sig>.7){
    // faint ‚Äúbars‚Äù preview
    pctx.clearRect(0,0,prevCv.width,prevCv.height);
    const w=prevCv.width,h=prevCv.height,r=8;
    const cols=['#7b00ff','#00f','#0ff','#0f0','#ff0','#f80','#f00'];
    cols.forEach((c,i)=>{pctx.fillStyle=c;pctx.fillRect((i*(w/7))|0,0,(w/7)+1,h)});
    if(iframe.dataset.loaded!=='1'){ iframe.style.display='none'; }
    lockTimer+=1;
    if(lockTimer>45){ // ~1s hold ‚Üí ask to jump
      lockTimer=0;
      const s = stations[currentIdx];
      if(confirm(`Lock to "${s.name}"?\nOpen in a new tab?`)) window.open(s.url,'_blank','noopener');
    }
  }else{
    lockTimer=0; pctx.clearRect(0,0,prevCv.width,prevCv.height);
    iframe.style.display='none';
  }
}
dial.addEventListener('input', updateFromDial);
document.getElementById('tuneBtn').onclick=()=>{
  const s=stations[currentIdx];
  log(`tuning‚Ä¶ carrier locked ‚Ä¢ ${s.name} @ ${fmt(s.freq)}`);
  window.open(s.url,'_blank','noopener');
};
updateFromDial();

/* ---------- artifacts (do real things) ---------- */
function flashGlass(){
  const el=document.querySelector('.crt'); el.style.boxShadow='inset 0 0 0 2px rgba(255,255,255,.4), inset 0 0 200px rgba(255,255,255,.25)';
  setTimeout(()=>el.style.boxShadow='',220);
}
document.getElementById('a-degauss').onclick=()=>{
  flashGlass();
  crackle=1; setTimeout(()=>crackle=0,600);
  log('artifact: CRT degauss ‚Ä¢ field collapse ‚Üí recover');
};
document.getElementById('a-center').onclick=()=>{
  const target=stations[currentIdx].freq + (Math.random()>.5? .4:-.4);
  const start=parseFloat(dial.value), end = clamp(target/50*1000,0,1000);
  const t0=performance.now(); const dur=1800;
  (function anim(t){
    const k=clamp((t-t0)/dur,0,1);
    dial.value = start + (end-start)*(0.5-0.5*Math.cos(Math.PI*k));
    updateFromDial();
    if(k<1) requestAnimationFrame(anim);
  })(performance.now());
  log('artifact: auto-center ‚Ä¢ easing to sweet spot');
};
document.getElementById('a-bars').onclick=()=>{
  // draw SMPTE bars + beep
  pctx.clearRect(0,0,prevCv.width,prevCv.height);
  const w=prevCv.width,h=prevCv.height; const cols=['#c0c0c0','#c0c000','#00c0c0','#00c000','#c000c0','#c00000','#0000c0'];
  cols.forEach((c,i)=>{pctx.fillStyle=c;pctx.fillRect((i*(w/7))|0,0,(w/7)+1,h*0.75)});
  pctx.fillStyle='#222'; pctx.fillRect(0,h*.75,w,h*.25);
  if(audioOn && ac){ const b=ac.createOscillator(),g=ac.createGain(); b.type='square'; b.frequency.value=987; g.gain.value=.07; b.connect(g).connect(ac.destination); b.start(); setTimeout(()=>b.stop(),180);}
  log('artifact: VHS color bars');
};
document.getElementById('a-crackle').onclick=()=>{
  crackle = crackle?0:1;
  log(`artifact: shortwave crackle ${crackle?'ON':'OFF'}`);
};
document.getElementById('a-random').onclick=()=>{
  const r = stations[Math.floor(Math.random()*stations.length)];
  dial.value = clamp(r.freq/50*1000 + (Math.random()-.5)*60,0,1000);
  updateFromDial(); log(`artifact: randomized ‚Ä¢ near ${r.name}`);
};
document.getElementById('a-open').onclick=()=>{
  const s=stations[currentIdx]; window.open(s.url,'_blank','noopener'); log(`open: ${s.name}`);
};

/* ---------- operator + consciousness ---------- */
const opBtn=document.getElementById('opBtn');
opBtn.onclick=()=>alert(
`operator.note:
‚Äî lock(channel="weird web")
‚Äî catch(punchline)
‚Äî rebroadcast as artifact

hotkeys:
? operator ‚Ä¢ b consciousness ‚Ä¢ drag dial or use Tune
`
);
addEventListener('keydown',(e)=>{
  if(e.key==='?') opBtn.click();
  if(e.key.toLowerCase()==='b'){ document.body.classList.toggle('is-conscious'); }
});

/* first boot log */
log('‚Äî IDLE CARRIER ‚Äî');
log('[boot] antenna online ‚Ä¢ noise floor nominal');
log(`[scan] stations loaded: ${stations.length}`);
</script>
</body>
</html>
