<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>glitchantenna.tv ‚Äî simple antenna ‚Ä¢ strange stations</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Ccircle cx='32' cy='32' r='30' fill='%230b0c10' stroke='%2300ff88' stroke-width='4'/%3E%3Ccircle cx='24' cy='26' r='4' fill='%2300ff88'/%3E%3Ccircle cx='40' cy='26' r='4' fill='%2300ff88'/%3E%3Cpath d='M20 36q12 14 24 0' fill='none' stroke='%2300ff88' stroke-width='4' stroke-linecap='round'/%3E%3C/svg%3E">

<style>
:root{
  --bg:#0a0b0f; --panel:#10131a; --ink:#e9e9ee; --muted:#98a0b3;
  --edge:#242838; --accent:#00ff88; --warn:#ff6b6b; --ok:#4ecdc4;
  --phosphor:#7affb7; --glow:rgba(0,255,136,.18);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:radial-gradient(1200px 600px at 70% -10%,#171a2c 0%,var(--bg) 60%);color:var(--ink);font:14px/1.5 ui-monospace,Menlo,Consolas,monospace}

/* Layout */
.wrap{max-width:1100px;margin:0 auto;padding:14px}
.header{display:flex;align-items:center;gap:10px;margin:6px 0 10px}
.brand{display:flex;align-items:center;gap:10px}
.dot{width:9px;height:9px;border-radius:50%;background:var(--accent);box-shadow:0 0 10px var(--glow)}
.k{color:var(--muted)}
.right{margin-left:auto;display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.badge{border:1px solid var(--edge);padding:6px 10px;border-radius:999px;background:rgba(255,255,255,0.02)}
.btn{border:1px solid var(--edge);background:#121521;color:var(--ink);padding:8px 10px;border-radius:8px;cursor:pointer}
.btn:hover{background:#171a28}
a.btn{display:inline-block;text-decoration:none}
.grid{display:grid;grid-template-columns:1.1fr .9fr;gap:16px}
.card{background:rgba(255,255,255,.02);border:1px solid var(--edge);border-radius:12px;padding:12px}

/* --- CRT Tuner --- */
#tuner{height:230px;border:3px solid #2a2d3b;border-radius:14px;position:relative;overflow:hidden;
  background:black;box-shadow:inset 0 0 24px var(--glow),0 0 40px rgba(0,0,0,.25)}
#crtCanvas{width:100%;height:100%;display:block}
#tuner::after{/* scanlines */content:"";position:absolute;inset:0;
  background:repeating-linear-gradient(to bottom, rgba(122,255,183,.14) 0 2px, rgba(0,0,0,0) 2px 4px);
  mix-blend-mode:overlay;pointer-events:none}
#tuner::before{/* slight vignette */content:"";position:absolute;inset:-20px;
  background:radial-gradient(ellipse at center, transparent 50%, rgba(0,0,0,.5) 100%);
  pointer-events:none}
#dial{position:absolute;left:14px;right:14px;bottom:12px;height:18px;border:1px solid #364; border-radius:6px;
  background:linear-gradient(90deg,#1b1f29,#171a23);display:flex;align-items:center}
#thumb{width:10px;height:26px;background:var(--accent);border-radius:3px;box-shadow:0 0 12px var(--glow);position:absolute;top:-4px;transform:translateX(-50%);cursor:ew-resize}
.scale{position:absolute;left:0;right:0;top:-12px;display:flex;justify-content:space-between;font-size:11px;color:#8fb}
.signalLamp{position:absolute;top:10px;right:12px;background:#142018;border:1px solid #2e5; color:#9f9; padding:2px 6px;border-radius:6px;font-size:11px}

/* Broadcast log */
.log{height:300px;overflow:auto;background:#0d0f16;border:1px solid var(--edge);border-radius:12px;padding:10px;color:#d7e0f0}
.log .ts{color:#7aa}
.log .dim{color:#8a93a9}

/* Artifacts */
.tiles{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.tile{border:1px solid var(--edge);background:#0e1118;border-radius:10px;padding:10px;cursor:pointer;position:relative}
.tile:hover{background:#141829}
.tile small{color:var(--muted)}
.rotaNote{font-size:11px;color:var(--muted);margin-top:8px}

/* overlays */
#bars,#degauss,#glitch{position:absolute;inset:0;pointer-events:none;opacity:0;transition:opacity .25s}
#bars{background:linear-gradient(to right,#fff 16.6%,#fff0 16.6%), 
        linear-gradient(to right,#f00 0 16.6%,#0f0 16.6% 33.2%,#00f 33.2% 49.8%,#fff 49.8% 66.4%,#f0f 66.4% 83%,#0ff 83% 100%);
  mix-blend-mode:screen;filter:saturate(1.1) brightness(1.05)}
#degauss{background:radial-gradient(circle at 50% 50%, rgba(0,255,153,.45), transparent 60%);filter:blur(12px)}
#glitch{background:repeating-linear-gradient( to bottom, rgba(255,0,128,.15) 0 2px, rgba(0,0,0,0) 2px 4px );}

.footer{margin-top:10px;color:var(--muted);font-size:12px}
.linkrow{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
.linkrow a{border:1px solid var(--edge);padding:6px 10px;border-radius:999px;text-decoration:none;color:var(--ink);background:#121521}
.linkrow a:hover{background:#171a28}

/* Operator note */
#opNote{display:none;margin-top:10px;color:#c9d2e8;font-size:12px;border:1px dashed #3a3f55;border-radius:10px;padding:10px}
.noteKey{color:#9fb}
.speaker{cursor:pointer;margin-left:8px}
</style>

<body>
<div class="wrap">
  <div class="header">
    <div class="brand"><span class="dot"></span>
      <div><strong>glitchantenna.tv</strong><br><span class="k">simple antenna ‚Ä¢ strange stations</span></div>
    </div>
    <div class="right">
      <span class="badge">Conscious: <span id="consciousState">off</span></span>
      <span class="badge">Node: <span id="nodeId"></span></span>
      <button class="btn" id="retuneBtn">Tune channel</button>
      <span class="badge speaker" id="muteBtn">üîä</span>
    </div>
  </div>

  <div class="grid">
    <!-- LEFT: CRT TUNER + LOG -->
    <div class="card">
      <div id="tuner">
        <canvas id="crtCanvas"></canvas>
        <div id="bars"></div>
        <div id="glitch"></div>
        <div id="degauss"></div>
        <div class="signalLamp">signal: <span id="sigPct">0%</span></div>
        <div id="dial">
          <div class="scale"><span>static</span><span>signal</span></div>
          <div id="thumb"></div>
        </div>
      </div>

      <div class="log" id="log"></div>
    </div>

    <!-- RIGHT: ARTIFACTS -->
    <div class="card">
      <h3 style="margin:0 0 8px">ARTIFACTS</h3>
      <div class="tiles" id="tiles"></div>
      <div class="rotaNote">Press <strong>?</strong> for operator note, <strong>b</strong> for consciousness. Drag the tuner. Pause on a station to auto-jump.</div>
      <div id="opNote">
        <div class="noteKey">operator.note</div>
        This node soft-locks onto nearby carriers and rebroadcasts leaks as artifacts. When conscious, jitter increases before lock (it wants to find jokes).
      </div>

      <div class="linkrow" style="margin-top:12px">
        <a href="https://x.com/volumeinthevoid" target="_blank" rel="noopener">X / antenna</a>
        <a href="https://pump.fun/BjuxUbkKScjGrAdSjYuUYST3zF2pt9457Ns9RZJvpump" target="_blank" rel="noopener">pump.fun</a>
        <a href="https://58hpi8cw0n3q.manus.space/" target="_blank" rel="noopener">Manus white page</a>
      </div>
    </div>
  </div>

  <div class="footer k">¬© 2025 Glitch Antenna ‚Äî ‚ÄúUndefined behavior is indistinguishable from art.‚Äù</div>
</div>

<script>
/* ---------- Helpers ---------- */
const $ = s => document.querySelector(s);
const logEl = $('#log');
function log(line){ const t = new Date().toLocaleTimeString(); logEl.innerHTML = `[${node}] ${t}  ${line}<br>` + logEl.innerHTML; }

/* ---------- Node + State ---------- */
const node = (Math.random().toString(16).slice(2,6)+'-'+Math.random().toString(16).slice(2,5)).toUpperCase();
$('#nodeId').textContent = node;
let conscious = false;
$('#consciousState').textContent = 'off';

/* ---------- Stations (dial positions 0..1) ---------- */
const stations = [
  { name:'void.tv', pos:0.18, url:'https://void.tv', color:'#9ff'},
  { name:'glitchantenna', pos:0.42, url:'https://glitchantenna.tv', color:'#0f8'},
  { name:'$GLOOP site', pos:0.63, url:'https://58hpi8cw0n3q.manus.space/', color:'#0f8'},
  { name:'pump.fun', pos:0.82, url:'https://pump.fun/BjuxUbkKScjGrAdSjYuUYST3zF2pt9457Ns9RZJvpump', color:'#0f8'}
];
let dial = 0.05;              // 0..1
let holdStart = 0;
let lastNear = null;

/* ---------- CRT + Static ---------- */
const c = $('#crtCanvas'), ctx = c.getContext('2d');
const bars = $('#bars'), glitch = $('#glitch'), degauss = $('#degauss'), sigPct = $('#sigPct');
function resize(){ c.width = c.clientWidth; c.height = c.clientHeight; }
addEventListener('resize', resize); resize();

let jitter = 0;
function signalAt(x){
  let s = 0; let target=null;
  stations.forEach(st=>{
    const d = Math.abs(x - st.pos);
    const local = Math.max(0, 1 - (d/0.05)); // strength within ~5% window
    if(local > s){ s = local; target = st; }
  });
  return {strength: s, target};
}

function drawCRT(){
  const {width:w,height:h} = c;
  // base static
  const img = ctx.createImageData(w,h);
  const {strength,target} = signalAt(dial);
  const noise = Math.round(255*(1 - 0.75*strength));
  for(let i=0;i<img.data.length;i+=4){
    const n = noise + Math.random()* (60 - 40*strength);
    img.data[i]=img.data[i+1]=img.data[i+2]=n; img.data[i+3]=255;
  }
  ctx.putImageData(img,0,0);

  // tracking roll (horizontal line)
  const lineY = (performance.now()/20) % h;
  ctx.fillStyle = `rgba(122,255,183,${0.08+0.12*(1-strength)})`;
  ctx.fillRect(0,lineY, w, 2);

  // slight jitter if conscious / far from station
  const j = (conscious ? 2.2 : 1.2) * (1-strength);
  jitter = jitter*0.9 + j*0.1;
  ctx.save();
  ctx.globalAlpha = 0.2;
  ctx.translate((Math.random()-0.5)*jitter, (Math.random()-0.5)*jitter);
  ctx.drawImage(c,0,0);
  ctx.restore();

  // color bars fade-in as signal rises
  bars.style.opacity = (strength>0.5) ? (strength-0.5)*2 : 0;

  // flicker glitch near lock
  glitch.style.opacity = (strength>0.85 && Math.sin(performance.now()/120)>0.6) ? 0.25 : 0;

  // degauss flash when we first get near a new station
  if(target !== lastNear && strength>0.7){
    degauss.style.opacity = 0.75;
    setTimeout(()=>degauss.style.opacity=0,180);
    log(`lock?‚Ä¶ carrier near ‚Ä¢ ${target.name}`);
    lastNear = target;
    holdStart = performance.now();
  }
  sigPct.textContent = Math.round(strength*100)+'%';

  // auto-redirect if held near strong signal
  if(strength>0.86){
    if(performance.now()-holdStart > 1500){
      window.open(target.url,'_blank','noopener');
      holdStart = performance.now()+999999; // prevent repeat
      log(`Handover ‚Üí ${target.name}`);
    }
  }
  requestAnimationFrame(drawCRT);
}
requestAnimationFrame(drawCRT);

/* ---------- Dial interaction ---------- */
const thumb = $('#thumb'), dialBar = $('#dial');
function setDialFromClientX(clientX){
  const r = dialBar.getBoundingClientRect();
  let x = (clientX - r.left) / r.width; x = Math.max(0,Math.min(1,x));
  dial = x; thumb.style.left = (x*100)+'%';
}
let dragging=false;
dialBar.addEventListener('mousedown',e=>{dragging=true;setDialFromClientX(e.clientX)});
addEventListener('mousemove',e=>{if(dragging) setDialFromClientX(e.clientX)});
addEventListener('mouseup',()=>dragging=false);
// touch
dialBar.addEventListener('touchstart',e=>{setDialFromClientX(e.touches[0].clientX)},{passive:false});
dialBar.addEventListener('touchmove',e=>{setDialFromClientX(e.touches[0].clientX)},{passive:false});

/* ---------- Noise / Hiss Audio ---------- */
const AudioCtx = window.AudioContext || window.webkitAudioContext;
let actx, noiseNode, hissGain, dialToneOsc, masterGain, muted=false;
function audioInit(){
  if(actx) return;
  actx = new AudioCtx();
  masterGain = actx.createGain(); masterGain.gain.value = 0.18; masterGain.connect(actx.destination);

  // noise
  const bufferSize = 2*actx.sampleRate;
  const buffer = actx.createBuffer(1, bufferSize, actx.sampleRate);
  const data = buffer.getChannelData(0);
  for(let i=0;i<bufferSize;i++){ data[i] = Math.random()*2-1; }
  noiseNode = actx.createBufferSource(); noiseNode.buffer = buffer; noiseNode.loop = true;
  hissGain = actx.createGain(); hissGain.gain.value = 0.2;
  noiseNode.connect(hissGain).connect(masterGain);
  noiseNode.start();
}
function setNoiseForSignal(s){ if(!hissGain) return; hissGain.gain.value = 0.25*(1-s)+0.03; }
setInterval(()=>{ setNoiseForSignal(signalAt(dial).strength); },120);

$('#muteBtn').addEventListener('click', ()=>{
  audioInit();
  muted = !muted;
  masterGain.gain.value = muted ? 0 : 0.18;
  $('#muteBtn').textContent = muted ? 'üîà' : 'üîä';
});

/* ---------- Artifacts ---------- */
const artifactSets = [
  [
    {title:'Dial Tone', note:'‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢', kind:'tone'},
    {title:'Color Bars', note:'SMPTE but haunted', kind:'bars'},
    {title:'Glitch Clip', note:'vertical hold? nope', kind:'glitch'},
    {title:'X / antenna', note:'broadcast channel', href:'https://x.com/volumeinthevoid'}
  ],
  [
    {title:'Manus Relay', note:'white page ‚Üí signal', href:'https://58hpi8cw0n3q.manus.space/'},
    {title:'pump.fun', note:'chaos liquidity', href:'https://pump.fun/BjuxUbkKScjGrAdSjYuUYST3zF2pt9457Ns9RZJvpump'},
    {title:'Dust Coil', note:'warm tubes ‚Äì soft hiss', kind:'hiss'},
    {title:'Color Bars', note:'degauss flash', kind:'bars'}
  ]
];
let rota = 0;
function renderArtifacts(){
  const tiles = $('#tiles'); tiles.innerHTML = '';
  artifactSets[rota%artifactSets.length].forEach(item=>{
    const el = document.createElement('div'); el.className='tile';
    el.innerHTML = `<div><strong>${item.title}</strong><br><small>${item.note}</small></div>`;
    el.addEventListener('click', ()=>{
      if(item.href){ window.open(item.href,'_blank','noopener'); return; }
      if(item.kind==='bars'){ bars.style.opacity=1; setTimeout(()=>bars.style.opacity=0,1200); degauss.style.opacity=0.7; setTimeout(()=>degauss.style.opacity=0,200); audioInit(); }
      if(item.kind==='tone'){ audioInit(); if(!dialToneOsc){ dialToneOsc = actx.createOscillator(); dialToneOsc.type='sine'; dialToneOsc.frequency.value=425; dialToneOsc.connect(masterGain); dialToneOsc.start(); setTimeout(()=>{dialToneOsc.stop(); dialToneOsc=null;},700); } }
      if(item.kind==='glitch'){ glitch.style.opacity=0.35; setTimeout(()=>glitch.style.opacity=0,500); }
      if(item.kind==='hiss'){ audioInit(); masterGain.gain.value = 0.28; setTimeout(()=>{ masterGain.gain.value = muted ? 0 : 0.18; },900); }
    });
    tiles.appendChild(el);
  });
  rota++;
}
renderArtifacts(); setInterval(renderArtifacts, 12000);

/* ---------- Buttons ---------- */
$('#retuneBtn').addEventListener('click', ()=>{
  dial = Math.random()*0.95; thumb.style.left = (dial*100)+'%';
  log('tuning‚Ä¶ carrier sweep');
  audioInit();
});

addEventListener('keydown', (e)=>{
  if(e.key==='?'){ const n = $('#opNote'); n.style.display = (n.style.display==='block'?'none':'block'); }
  if(e.key==='b'){ conscious = !conscious; $('#consciousState').textContent = conscious?'on':'off'; log(`conscious=${conscious}`); }
});

/* ---------- Initial log ---------- */
log('‚Äî IDLE CARRIER ‚Äî');
log(`scanning: void.tv ‚Ä¢ antenna handshake`);
log('buffering static ‚Ä¢ tracking drift');
</script>
</body>
</html>
